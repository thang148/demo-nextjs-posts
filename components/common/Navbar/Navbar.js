import { Fragment, useEffect, useState } from "react"
import dynamic from "next/dynamic"
import { useRouter } from "next/router"
import Link from "next/link"
import { Menu, IcLive } from "components/ui/Icons"
import { Avatar, SearchOnnews } from "components/ui"
// import MenusMobile from "../MenusMobile"
// import s from "./Navbar.module.css"
// import cn from "classnames"
import useStore from "components/ui/Context"

const MenuPC = dynamic(() => import("../MenuPc"))
const MenusMobile = dynamic(() => import("../MenusMobile"), { ssr: false })

export default function Sidebar({ menus = [] }) {
  const router = useRouter()
  const [isOpen, setOpen] = useState(false)
  const { userInfo, togleModalLogin } = useStore()

  function showModalLogin() {
    togleModalLogin()
    if (isOpen) {
      setOpen(false)
    }
  }
  useEffect(() => {
    if (isOpen) {
      document.body.style.overflow = "hidden"
    } else {
      document.body.style.overflow = "inherit"
    }
  }, [isOpen])

  useEffect(() => {
    if (isOpen) setOpen(false)
  }, [router])

  const wapperClassname = isOpen ? "translate-x-0" : "translate-x-full"

  return (
    <Fragment>
      {/* Menus PC ______________________*/}
      <header className="navbar bg-header sticky top-0 z-10">
        <div className="justify-between max-w-base xl:max-w-7xl flex m-auto w-full items-center text-white">
          <div className="flex gap-2">
            <div className="tb:hidden xl:block">
              <div className="flex items-center">
                <Link href="/">
                  <a>{logoIC}</a>
                </Link>
              </div>
            </div>

            <div className="hidden tb:flex h-44">
              <MenuPC menus={menus} />
            </div>
          </div>
          <div className="flex">
            <div className="tb:hidden items-center gap-4 flex">
              <div className="">
                <Link href="/livescore">
                  <a>{IconLivescore}</a>
                </Link>
              </div>
              <button onClick={() => setOpen(!isOpen)} className="text-white mr-4">
                {isOpen ? iconX : Menu}
              </button>
            </div>
            <div className="hidden tb:block pr-4">
              <div className="flex gap-4">
                <a href="https://tv.onsports.vn/" target="_blank" rel="noreferrer">
                  <button className="py-1 px-2 bg-primary-600 text-white flex rounded gap-2 items-center">
                    {IcLive} Xem Live
                  </button>
                </a>
                <SearchOnnews />
                {userInfo?.fullname ? <Avatar /> : <button onClick={showModalLogin}>{icUser}</button>}
              </div>
            </div>
          </div>
        </div>
      </header>

      {/* Menus Mobile _______________________________*/}
      <MenusMobile
        menus={menus}
        visible={isOpen}
        router={router}
        wapperClassname={wapperClassname}
        userInfo={userInfo}
        setOpen={setOpen}
        showModalLogin={showModalLogin}
      />
    </Fragment>
  )
}

const logoIC = (
  <svg width="180" height="44" viewBox="0 0 180 44" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path opacity="0.5" d="M17 0H180L172 44H9L17 0Z" fill="white" />
    <path opacity="0.5" d="M11.9998 0H175L167 44H6L11.9998 0Z" fill="white" />
    <path d="M142.338 0H169.824L161.6 44H142.338V0Z" fill="#DDDDDD" />
    <path
      d="M156.14 0H8.28748C4.81682 0 2 2.81271 2 6.27925V6.28748V6.29159V37.7084V37.7249C2.00411 41.1914 4.81682 44 8.28748 44H156.144C159.615 44 162.427 41.1914 162.427 37.7207V37.7125V6.2957V6.29159V6.28336V6.27925C162.419 2.8086 159.61 0 156.14 0Z"
      fill="#DDDDDD"
    />
    <path
      d="M51.396 23.1729C51.396 18.7646 54.6199 15.4297 59.3777 15.4297C63.3007 15.4297 65.661 17.716 65.661 21.0345C65.661 25.4387 62.4371 28.7736 57.6835 28.7736C53.7523 28.7736 51.396 26.4873 51.396 23.1729ZM62.6386 21.199C62.6386 19.2828 61.3844 17.971 59.1227 17.971C56.2072 17.971 54.4225 20.2779 54.4225 23.0043C54.4225 24.9205 55.6767 26.2282 57.9425 26.2282C60.8498 26.2282 62.6386 23.9254 62.6386 21.199Z"
      fill="#283785"
    />
    <path
      d="M77.6235 22.0373C77.6235 22.4115 77.5865 22.8186 77.496 23.2421L76.3816 28.773H73.4866L74.564 23.4313C74.6216 23.1887 74.638 22.946 74.638 22.7445C74.638 21.7247 74.0788 21.149 72.9315 21.149C71.4635 21.149 70.4436 21.9674 70.09 23.7109L69.0908 28.7771H66.1958L68.2149 18.6406H70.9577L70.6986 19.8702C71.6074 19.0354 72.7588 18.6447 73.9842 18.6447C76.176 18.6447 77.6235 19.829 77.6235 22.0373Z"
      fill="#283785"
    />
    <path
      d="M80.333 27.3326L81.5461 25.0257C82.7263 25.8893 84.2766 26.3704 85.8063 26.3704C87.447 26.3704 88.4792 25.7988 88.4792 24.8571C88.4792 22.7928 82.0848 23.899 82.0848 19.7909C82.0848 17.1386 84.404 15.4238 87.9816 15.4238C89.7128 15.4238 91.3166 15.8104 92.4392 16.53L91.3166 18.8164C90.3379 18.1502 89.0837 17.8212 87.813 17.8212C86.0818 17.8212 85.0661 18.4833 85.0661 19.4044C85.0496 21.5263 91.4605 20.4201 91.4605 24.3801C91.4605 27.053 89.1001 28.7678 85.5102 28.7678C83.4089 28.7678 81.4186 28.1427 80.333 27.3326Z"
      fill="#283785"
    />
    <path
      d="M104.118 23.0285C104.118 26.3306 101.729 28.732 98.6855 28.732C97.2627 28.732 96.1525 28.2756 95.5151 27.2763L94.5487 32.1246H91.7031L94.3925 18.6367H97.09L96.8598 19.747C97.6411 19.0356 98.665 18.6367 99.8657 18.6367C102.152 18.6367 104.118 20.2405 104.118 23.0285ZM101.239 23.156C101.239 21.8236 100.421 20.9889 98.9981 20.9889C97.3409 20.9889 96.136 22.3006 96.136 24.2169C96.136 25.5492 96.9379 26.384 98.3607 26.384C100.034 26.384 101.239 25.0722 101.239 23.156Z"
      fill="#283785"
    />
    <path
      d="M105.158 24.3608C105.158 21.0876 107.646 18.6367 111.104 18.6367C114.123 18.6367 116.064 20.3762 116.064 23.0449C116.064 26.3182 113.592 28.7732 110.117 28.7732C107.12 28.7691 105.158 27.0132 105.158 24.3608ZM113.173 23.1724C113.173 21.836 112.367 20.9971 110.94 20.9971C109.258 20.9971 108.049 22.313 108.049 24.2334C108.049 25.5698 108.871 26.4087 110.298 26.4087C111.968 26.4087 113.173 25.0928 113.173 23.1724Z"
      fill="#283785"
    />
    <path
      d="M125.028 18.6367L124.51 21.2891C124.251 21.2726 124.086 21.252 123.844 21.252C122.149 21.252 121.064 22.0416 120.694 23.9085L119.719 28.7732H116.845L118.864 18.6367H121.594L121.323 19.9649C122.207 19.0068 123.428 18.6367 125.028 18.6367Z"
      fill="#283785"
    />
    <path
      d="M128.075 25.1219C128.038 25.2741 128.038 25.3975 128.038 25.529C128.038 26.1376 128.371 26.4872 129.07 26.4872C129.457 26.4872 129.88 26.3556 130.251 26.1376L130.674 28.1814C129.959 28.6255 129.054 28.7735 128.186 28.7735C126.344 28.7735 125.11 27.7414 125.11 26.0102C125.11 25.7347 125.147 25.4386 125.201 25.1466L126.916 16.5234H129.79L129.309 18.9373H131.764L131.32 21.1496H128.869L128.075 25.1219Z"
      fill="#283785"
    />
    <path
      d="M131.817 27.7455L132.915 25.6771C133.758 26.2446 135.095 26.6106 136.337 26.6106C137.673 26.6106 138.257 26.2446 138.257 25.6566C138.257 24.2667 133.043 25.4222 133.043 22.0872C133.043 19.8749 135.111 18.6289 137.986 18.6289C139.359 18.6289 140.733 18.9414 141.629 19.4513L140.605 21.5403C139.688 20.9728 138.607 20.7878 137.694 20.7878C136.374 20.7878 135.79 21.2278 135.79 21.7583C135.79 23.2057 140.987 22.0502 140.987 25.3276C140.987 27.5769 138.866 28.7695 136.028 28.7695C134.289 28.7695 132.644 28.3295 131.817 27.7455Z"
      fill="#283785"
    />
    <path
      d="M151.798 20.3633H146.46L145.741 23.5296H151.078L149.882 28.7726H153.274L154.471 23.5296L155.19 20.3633H151.798Z"
      fill="#283785"
    />
    <path d="M156.383 15.0918H152.991L151.934 19.7591H155.327L156.383 15.0918Z" fill="#E5342A" />
    <path d="M160.528 20.3633H155.808L155.088 23.5296H159.809L160.528 20.3633Z" fill="#E5342A" />
    <path
      d="M0 6.27901V6.28724V6.29135V21.9998V37.7041V37.7205C0.00411215 41.1912 2.81682 43.9998 6.28748 43.9998H37.7166C39.452 43.9998 41.0228 43.2966 42.1619 42.1616L1.84224 1.83789C0.703178 2.97696 0 4.5478 0 6.27901Z"
      fill="#283785"
    />
    <path
      d="M44.0042 37.7084V22V6.2957V6.29159V6.28336V6.27925C44 2.8086 41.1832 0 37.7167 0H6.28752C4.55219 0 2.98135 0.703178 1.84229 1.83813L42.1619 42.1578C43.2969 41.0228 44 39.4479 44.0042 37.7166V37.7084Z"
      fill="#E5342A"
    />
    <path
      d="M23.5006 5.44922H20.4988C19.7627 5.44922 19.1582 6.04959 19.1582 6.78567V24.3733H20.8072L20.799 21.5195L23.3403 24.3733H24.8371V6.78978C24.8412 6.04959 24.2408 5.44922 23.5006 5.44922ZM23.2662 21.6799L23.2498 21.6963L20.6468 18.6986H23.2704V21.6799H23.2662Z"
      fill="white"
    />
    <path
      d="M26.7329 11.1286C26.7329 13.0202 27.3744 14.6856 27.6746 14.9118C29.9733 16.6389 31.4619 19.3858 31.4619 22.4822C31.4619 27.7088 27.2264 31.9443 21.9998 31.9443C16.7774 31.9443 12.5378 27.7088 12.5378 22.4822C12.5378 19.3858 14.0223 16.6389 16.3209 14.9118C16.6252 14.6856 17.2708 13.0202 17.2708 11.1245C17.2708 9.23289 16.3251 8.44336 16.3251 8.44336C10.7737 10.6886 6.85889 16.129 6.85889 22.4822C6.85889 30.8422 13.6398 37.6232 21.9998 37.6232C30.3639 37.6232 37.1408 30.8463 37.1408 22.4822C37.1408 16.129 33.226 10.6886 27.6787 8.44336C27.6787 8.44336 26.7329 9.237 26.7329 11.1286Z"
      fill="white"
    />
  </svg>
)

const icUser = (
  <svg xmlns="http://www.w3.org/2000/svg" className="h-7 w-7" viewBox="0 0 20 20" fill="currentColor">
    <path
      fillRule="evenodd"
      d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 0010 16a5.986 5.986 0 004.546-2.084A5 5 0 0010 11z"
      clipRule="evenodd"
    />
  </svg>
)

const iconX = (
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="32px"
    height="32px"
    fill="none"
    viewBox="0 0 24 24"
    stroke="currentColor"
  >
    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M6 18L18 6M6 6l12 12" />
  </svg>
)

const IconLivescore = (
  <svg width="90" height="15" viewBox="0 0 90 15" fill="none" xmlns="http://www.w3.org/2000/svg">
    <g clipPath="url(#clip0)">
      <g clipPath="url(#clip1)">
        <path
          d="M4.41892 0.518445C3.54003 0.874779 2.7514 1.39871 2.07515 2.07476C1.39871 2.75101 0.875366 3.53984 0.518837 4.41853C0.174642 5.26747 0 6.16457 0 7.08477C0 8.00477 0.174642 8.90187 0.518837 9.75041C0.875366 10.6293 1.3989 11.4181 2.07515 12.0942C2.7514 12.7706 3.53984 13.2942 4.41892 13.6505C5.26786 13.9951 6.16476 14.1691 7.08496 14.1691C8.00516 14.1691 8.90187 13.9945 9.7508 13.6505C10.6295 13.2942 11.4185 12.7706 12.0946 12.0942C12.771 11.4181 13.2946 10.6297 13.6509 9.75041C13.9951 8.90187 14.1693 8.00477 14.1693 7.08477C14.1693 6.16457 13.9949 5.26747 13.6509 4.41853C13.2946 3.53984 12.7706 2.75081 12.0946 2.07476C11.4185 1.39871 10.6303 0.874779 9.7508 0.518445C8.90187 0.174447 8.00516 0 7.08496 0C6.16476 0 5.26786 0.174447 4.41892 0.518445ZM1.7707 10.0672C1.42944 9.85301 1.11501 9.60631 0.8366 9.31577C0.411349 8.11911 0.3393 6.82359 0.621038 5.59384C0.753586 5.33247 0.904342 5.08147 1.07487 4.84104C1.12754 4.76684 1.17629 4.6895 1.23268 4.61745L2.83148 5.5635C2.83148 5.57603 2.83148 5.58973 2.83148 5.60363C2.82737 6.46353 2.91469 7.31717 3.08855 8.15847C3.08913 8.16238 3.08972 8.16454 3.09051 8.16806L1.85058 10.1122C1.82356 10.0985 1.79674 10.0836 1.7707 10.0672ZM6.52442 13.3539C6.80029 13.4947 7.08398 13.6135 7.37551 13.7102C6.13716 13.7641 4.88646 13.4739 3.78085 12.8395L6.46099 13.3171C6.48154 13.3302 6.50249 13.3427 6.52442 13.3539ZM6.51463 12.8701L3.35188 12.3064C2.98184 11.8571 2.649 11.3817 2.36296 10.8736C2.29013 10.7444 2.20887 10.6189 2.1472 10.484L3.38595 8.54182C3.41336 8.54867 3.4439 8.55591 3.47856 8.56512C4.25348 8.77246 5.04212 8.91988 5.83623 9.0354C5.88263 9.04186 5.9214 9.04754 5.95448 9.05106L7.43934 11.6184C7.18168 11.9806 6.92109 12.3409 6.65482 12.6972C6.61057 12.7565 6.56358 12.8135 6.51463 12.8701ZM11.7766 11.7764C11.5248 12.0284 11.2576 12.2555 10.9778 12.458C10.9314 12.0871 10.8513 11.7238 10.7384 11.3688L12.3227 8.41319C12.7591 8.21446 13.18 7.98911 13.5708 7.70972C13.6219 7.6735 13.6644 7.63297 13.6973 7.58872C13.5826 9.11606 12.9423 10.6109 11.7766 11.7764ZM11.7063 7.94329C11.7653 8.05568 11.8234 8.16923 11.8818 8.28436L10.3515 11.1389C10.3427 11.1409 10.3343 11.1429 10.3254 11.144C9.49824 11.2985 8.66438 11.3807 7.82347 11.3847L6.29633 8.74407C6.53402 8.30276 6.76955 7.85969 7.00312 7.41643C7.16171 7.1157 7.31756 6.81301 7.47321 6.51052L10.6338 6.18591C11.0209 6.75369 11.3876 7.33361 11.7063 7.94329ZM11.0651 4.55735C10.9152 4.95342 10.7546 5.34539 10.595 5.73814L7.51609 6.05434C7.47928 6.00578 7.4411 5.95801 7.40096 5.91239C7.03739 5.50065 6.67146 5.09145 6.30612 4.68108C6.30945 4.67697 6.31278 4.67384 6.3161 4.67012C6.16868 4.52289 6.02086 4.37565 5.87343 4.22803L6.73059 1.64736C6.78971 1.63169 6.84923 1.61858 6.90934 1.61211C7.37531 1.56473 7.84188 1.51109 8.30902 1.48407C8.59507 1.46801 8.88268 1.45881 9.17362 1.47937L11.2944 3.86974C11.2214 4.10038 11.1501 4.3316 11.0651 4.55735ZM11.7766 2.39272C12.3616 2.97812 12.8147 3.64615 13.135 4.3598C12.7387 4.08706 12.315 3.86269 11.8696 3.67983C11.8003 3.65124 11.7292 3.62598 11.657 3.60112L9.5695 1.24834C9.58399 1.14673 9.59163 1.04492 9.59476 0.942325C10.3889 1.26557 11.1333 1.74956 11.7766 2.39272ZM4.96008 0.818783C4.9683 0.824853 4.97222 0.829943 4.97692 0.831314C5.45405 0.996167 5.88811 1.23894 6.29731 1.52695L5.49654 3.93846C5.49243 3.93964 5.48851 3.94081 5.48459 3.94257C5.32072 4.01032 5.15371 4.07101 4.99239 4.14443C4.32769 4.44653 3.67963 4.78113 3.06916 5.1823L1.48896 4.24741C1.49131 4.19808 1.49973 4.14795 1.51657 4.10331C1.62269 3.8206 1.72704 3.53631 1.84706 3.25927C1.93947 3.04587 2.0448 2.8397 2.15973 2.63824C2.23491 2.55522 2.31284 2.47299 2.39311 2.39272C3.14356 1.64246 4.03048 1.10972 4.97476 0.794701C4.96987 0.802337 4.96478 0.810364 4.96008 0.818783Z"
          fill="white"
        />
      </g>
    </g>
    <path
      d="M20.1893 12.0847H27.07L27.4478 9.85744H23.3314L24.6439 1.9029H21.8797L20.1893 12.0847ZM28.2271 12.0847H30.9715L32.2442 4.44835H29.4999L28.2271 12.0847ZM30.9913 3.6529C31.7371 3.6529 32.4331 3.08614 32.5425 2.40006C32.6519 1.70403 32.1448 1.14722 31.399 1.14722C30.6533 1.14722 29.9573 1.70403 29.8379 2.40006C29.7186 3.08614 30.2456 3.6529 30.9913 3.6529ZM41.3385 4.44835H38.3555L36.2873 9.49949H36.2078L35.8101 4.44835H33.026L34.3186 12.0847H37.5004L41.3385 4.44835ZM44.2531 12.2239C46.3809 12.2239 47.8923 11.2097 48.4292 9.61881H45.9235C45.6849 10.0563 45.1877 10.2949 44.6309 10.2949C43.8156 10.2949 43.4377 9.75801 43.557 9.02222L43.5819 8.9029H48.5485L48.6479 8.26653C49.0457 5.8404 47.8127 4.34892 45.5059 4.34892C43.1394 4.34892 41.3695 5.91994 40.9718 8.28642C40.5542 10.7523 41.807 12.2239 44.2531 12.2239ZM43.8653 7.39153C44.0194 6.72037 44.606 6.2779 45.2673 6.2779C45.9434 6.2779 46.361 6.73528 46.2616 7.39153H43.8653ZM56.9468 6.93415C57.1606 5.32335 55.9127 4.34892 53.6258 4.34892C51.5277 4.34892 50.1208 5.15432 49.8672 6.67563C49.6535 7.94835 50.3644 8.79352 51.8758 9.06199L53.1883 9.30063C53.7699 9.41497 53.9439 9.49949 53.9241 9.71824C53.8694 10.106 53.3722 10.3944 52.7905 10.3745C52.2536 10.3645 51.9106 10.116 51.8956 9.61881H49.2309C49.1265 11.1699 50.3445 12.2239 52.7508 12.2239C54.7991 12.2239 56.4397 11.2843 56.7081 9.71824C56.8971 8.52009 56.1911 7.78926 54.6797 7.51085L53.1684 7.23244C52.6066 7.12307 52.537 6.98884 52.5718 6.83472C52.6265 6.44693 53.1385 6.17847 53.6854 6.17847C54.1527 6.17847 54.5157 6.45688 54.4809 6.93415H56.9468ZM61.021 12.2239C63.288 12.2239 64.879 10.9313 65.2568 8.9029H62.7113C62.5125 9.69835 62.0153 10.1359 61.3988 10.1359C60.6829 10.1359 60.325 9.51938 60.5238 8.26653C60.7227 7.01369 61.2994 6.39722 62.0352 6.39722C62.6318 6.39722 62.9699 6.83472 62.9102 7.63017H65.4557C65.7738 5.64153 64.5807 4.34892 62.3335 4.34892C59.8477 4.34892 58.0977 5.93983 57.7199 8.28642C57.3221 10.633 58.5352 12.2239 61.021 12.2239ZM69.5112 12.2239C71.997 12.2239 73.7321 10.633 74.1249 8.28642C74.5077 5.93983 73.2996 4.34892 70.8237 4.34892C68.328 4.34892 66.5929 5.93983 66.2101 8.28642C65.8173 10.633 67.0254 12.2239 69.5112 12.2239ZM69.8493 10.1955C69.1284 10.1955 68.8152 9.46469 69.0141 8.26653C69.208 7.06838 69.7698 6.33756 70.4857 6.33756C71.2016 6.33756 71.5148 7.06838 71.3209 8.26653C71.122 9.46469 70.5602 10.1955 69.8493 10.1955ZM74.6021 12.0847H77.3465L78.0027 8.10744C78.1618 7.23244 78.8578 6.65574 79.6533 6.65574C79.9516 6.65574 80.3891 6.69551 80.6476 6.79494L81.0453 4.44835C80.8266 4.38869 80.6078 4.34892 80.3692 4.34892C79.5538 4.34892 78.8379 4.82619 78.3805 5.90006H78.301L78.5396 4.44835H75.8749L74.6021 12.0847ZM83.8742 12.2239C86.002 12.2239 87.5134 11.2097 88.0503 9.61881H85.5446C85.306 10.0563 84.8088 10.2949 84.252 10.2949C83.4367 10.2949 83.0588 9.75801 83.1781 9.02222L83.203 8.9029H88.1696L88.269 8.26653C88.6668 5.8404 87.4338 4.34892 85.127 4.34892C82.7605 4.34892 80.9906 5.91994 80.5929 8.28642C80.1753 10.7523 81.4281 12.2239 83.8742 12.2239ZM83.4864 7.39153C83.6405 6.72037 84.2271 6.2779 84.8884 6.2779C85.5645 6.2779 85.9821 6.73528 85.8827 7.39153H83.4864Z"
      fill="white"
    />
    <defs>
      <clipPath id="clip0">
        <rect width="14.1693" height="14.1693" fill="white" />
      </clipPath>
      <clipPath id="clip1">
        <rect width="14.1693" height="14.1695" fill="white" />
      </clipPath>
    </defs>
  </svg>
)
